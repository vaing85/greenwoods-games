<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎰 Greenwood Games Casino - Ultimate Gaming Experience</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #0c0c0c, #1a1a2e, #16213e, #0f3460);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            color: white; 
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .container { max-width: 1600px; margin: 0 auto; padding: 20px; }
        
        .header { 
            text-align: center; 
            margin-bottom: 40px; 
            position: relative;
            background: linear-gradient(145deg, #1a1a2e, #16213e);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
            border: 2px solid #00d4aa;
        }
        
        .logo { 
            font-size: 4em; 
            margin-bottom: 15px; 
            text-shadow: 0 0 30px #00d4aa, 0 0 60px #00d4aa;
            animation: pulse 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse {
            from { text-shadow: 0 0 20px #00d4aa, 0 0 40px #00d4aa; }
            to { text-shadow: 0 0 30px #00d4aa, 0 0 60px #00d4aa, 0 0 80px #00d4aa; }
        }
        
        .subtitle { 
            font-size: 1.4em; 
            color: #00d4aa; 
            margin-bottom: 25px;
            font-weight: 300;
        }
        
        .user-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .info-card {
            background: linear-gradient(145deg, #ff6b6b, #ee5a52);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(255,107,107,0.3);
            transition: transform 0.3s;
        }
        
        .info-card:hover { transform: translateY(-5px); }
        
        .info-card.balance { background: linear-gradient(145deg, #00d4aa, #00b894); }
        .info-card.experience { background: linear-gradient(145deg, #74b9ff, #0984e3); }
        .info-card.level { background: linear-gradient(145deg, #fdcb6e, #e17055); }
        .info-card.jackpot { background: linear-gradient(145deg, #fd79a8, #e84393); }
        
        .status-panel { 
            background: linear-gradient(145deg, #16213e, #1a1a2e);
            padding: 25px; 
            border-radius: 15px; 
            margin-bottom: 40px;
            border: 1px solid #00d4aa;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .status-item {
            background: #0f3460;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #00d4aa;
            transition: all 0.3s;
        }
        
        .status-item:hover { transform: translateX(5px); }
        
        .games-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .game-card { 
            background: linear-gradient(145deg, #16213e, #1a1a2e);
            border-radius: 20px; 
            padding: 30px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            border: 2px solid transparent;
            background-clip: padding-box;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #00d4aa, #74b9ff, #fd79a8, #fdcb6e);
            z-index: -1;
            margin: -2px;
            border-radius: inherit;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .game-card:hover::before { opacity: 1; }
        .game-card:hover { transform: translateY(-10px) scale(1.02); }
        
        .game-title { 
            font-size: 2.2em; 
            margin-bottom: 20px; 
            text-align: center;
            background: linear-gradient(45deg, #00d4aa, #74b9ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .game-content { text-align: center; }
        
        .btn { 
            background: linear-gradient(45deg, #00d4aa, #00b894);
            border: none; 
            color: white; 
            padding: 15px 30px; 
            font-size: 1.1em; 
            border-radius: 25px; 
            cursor: pointer; 
            margin: 8px;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(0,212,170,0.4);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn:hover { 
            background: linear-gradient(45deg, #00b894, #00a085);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,212,170,0.6);
        }
        
        .btn:active { transform: translateY(-1px); }
        
        .btn.danger { background: linear-gradient(45deg, #ff6b6b, #ee5a52); }
        .btn.warning { background: linear-gradient(45deg, #fdcb6e, #e17055); }
        .btn.info { background: linear-gradient(45deg, #74b9ff, #0984e3); }
        
        .game-result { 
            background: linear-gradient(145deg, #0f3460, #1a1a2e);
            padding: 20px; 
            border-radius: 15px; 
            margin-top: 20px; 
            min-height: 80px;
            border-left: 5px solid #00d4aa;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
            font-size: 1.1em;
        }
        
        .slot-machine {
            background: linear-gradient(145deg, #2d3436, #636e72);
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
            box-shadow: inset 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .slot-symbols { 
            font-size: 4em; 
            margin: 20px; 
            background: #000;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.5);
        }
        
        .roulette-wheel { 
            width: 250px; 
            height: 250px; 
            border: 15px solid #ffd700; 
            border-radius: 50%; 
            margin: 25px auto; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 2.5em;
            background: linear-gradient(45deg, #ff6b6b, #000);
            box-shadow: 0 0 30px rgba(255,215,0,0.7), inset 0 0 20px rgba(0,0,0,0.5);
            transition: all 0.5s;
            animation: spin 4s ease-out;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(1440deg); }
        }
        
        .card-display { 
            font-size: 3em; 
            margin: 8px; 
            padding: 15px;
            background: linear-gradient(145deg, #fff, #f8f9fa);
            color: #2d3436;
            border-radius: 15px;
            display: inline-block;
            min-width: 90px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            border: 2px solid #ddd;
        }
        
        .dice-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
        }
        
        .dice {
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, #fff, #f1f2f6);
            border: 3px solid #2d3436;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
            color: #2d3436;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }
        
        .dice:hover { transform: rotateX(15deg) rotateY(15deg); }
        
        .features-showcase { 
            background: linear-gradient(145deg, #16213e, #1a1a2e);
            padding: 40px; 
            border-radius: 20px; 
            text-align: center;
            margin-top: 40px;
            border: 2px solid #00d4aa;
            box-shadow: 0 20px 50px rgba(0,0,0,0.4);
        }
        
        .features-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 25px; 
            margin-top: 30px;
        }
        
        .feature-card { 
            background: linear-gradient(145deg, #1a1a2e, #0f3460);
            padding: 25px; 
            border-radius: 15px;
            border: 1px solid #00d4aa;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .feature-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(0,212,170,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.6s;
            opacity: 0;
        }
        
        .feature-card:hover::before {
            animation: shimmer 1.5s ease-in-out;
            opacity: 1;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .feature-card:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 15px 40px rgba(0,212,170,0.3);
        }
        
        .achievement-bar {
            background: #0f3460;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border-left: 5px solid #fdcb6e;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #2d3436;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #74b9ff);
            border-radius: 5px;
            transition: width 1s ease;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(145deg, #00d4aa, #00b894);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,212,170,0.4);
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s;
        }
        
        .notification.show { transform: translateX(0); }
        
        .mini-game {
            background: linear-gradient(145deg, #fd79a8, #e84393);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .crypto-ticker {
            background: #000;
            color: #00d4aa;
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .ticker-content {
            animation: scroll 20s linear infinite;
            white-space: nowrap;
        }
        
        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        
        .leaderboard {
            background: linear-gradient(145deg, #74b9ff, #0984e3);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            margin: 5px 0;
            border-radius: 8px;
        }
        
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .games-container { grid-template-columns: 1fr; }
            .user-info { grid-template-columns: repeat(2, 1fr); }
            .logo { font-size: 2.5em; }
            .game-card { padding: 20px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">🎰 GREENWOOD GAMES CASINO 🎰</div>
            <div class="subtitle">Ultimate Gaming Experience - Live & Enhanced!</div>
            
            <div class="crypto-ticker">
                <div class="ticker-content" id="crypto-ticker">
                    BTC: $43,250 ↗ | ETH: $2,890 ↗ | USDT: $1.00 → | USDC: $1.00 → | Welcome to Greenwood Games!
                </div>
            </div>
            
            <div class="user-info">
                <div class="info-card balance">
                    💰 Balance<br><span id="balance">$1,000</span>
                </div>
                <div class="info-card experience">
                    ⭐ Experience<br><span id="experience">0 XP</span>
                </div>
                <div class="info-card level">
                    🏆 Level<br><span id="level">1</span>
                </div>
                <div class="info-card jackpot">
                    💎 Jackpot<br><span id="jackpot">$50,000</span>
                </div>
            </div>
        </div>

        <div class="status-panel">
            <h3>🚀 System Status & Live Features</h3>
            <div class="status-grid">
                <div class="status-item">
                    <strong>🔗 Server Connection:</strong><br>
                    <span id="server-status">Connecting...</span>
                </div>
                <div class="status-item">
                    <strong>🎮 Active Games:</strong><br>
                    <span id="games-status">6 Games Ready</span>
                </div>
                <div class="status-item">
                    <strong>💾 Database:</strong><br>
                    <span id="db-status">MongoDB Connected</span>
                </div>
                <div class="status-item">
                    <strong>👥 Online Players:</strong><br>
                    <span id="players-online">247 Players</span>
                </div>
                <div class="status-item">
                    <strong>🏆 Today's Winners:</strong><br>
                    <span id="winners-today">34 Jackpots</span>
                </div>
                <div class="status-item">
                    <strong>💰 Total Payouts:</strong><br>
                    <span id="total-payouts">$125,430</span>
                </div>
            </div>
            
            <div class="achievement-bar">
                <strong>🎯 Daily Challenge Progress:</strong> Win 5 games (3/5)
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 60%;"></div>
                </div>
            </div>
        </div>

        <div class="games-container">
            <!-- ENHANCED BLACKJACK -->
            <div class="game-card">
                <div class="game-title">🃏 BLACKJACK DELUXE</div>
                <div class="game-content">
                    <div style="margin: 20px 0;">
                        <div><strong>Your Hand:</strong> <span id="player-cards"></span></div>
                        <div><strong>Score:</strong> <span id="player-score">0</span></div>
                        <div><strong>Dealer:</strong> <span id="dealer-cards"></span></div>
                        <div><strong>Wins:</strong> <span id="blackjack-wins">0</span></div>
                    </div>
                    <div>
                        <button class="btn" onclick="startBlackjack()">New Game ($20)</button>
                        <button class="btn info" onclick="hitCard()">Hit</button>
                        <button class="btn warning" onclick="stand()">Stand</button>
                        <button class="btn danger" onclick="doubleDown()">Double Down</button>
                    </div>
                    <div class="game-result" id="blackjack-result">🎯 Professional Blackjack - Beat the dealer!</div>
                </div>
            </div>

            <!-- ENHANCED SLOT MACHINE -->
            <div class="game-card">
                <div class="game-title">🎰 MEGA SLOTS</div>
                <div class="game-content">
                    <div class="slot-machine">
                        <div class="slot-symbols" id="slot-display">🍒 🍒 🍒</div>
                        <div><strong>Streak:</strong> <span id="slot-streak">0</span></div>
                    </div>
                    <div>
                        <button class="btn" onclick="spinSlots(10)">Spin ($10)</button>
                        <button class="btn info" onclick="spinSlots(25)">High Bet ($25)</button>
                        <button class="btn warning" onclick="spinSlots(50)">Max Bet ($50)</button>
                    </div>
                    <div class="game-result" id="slot-result">🎰 Progressive jackpot building up!</div>
                </div>
            </div>

            <!-- ENHANCED ROULETTE -->
            <div class="game-card">
                <div class="game-title">🎯 EUROPEAN ROULETTE</div>
                <div class="game-content">
                    <div class="roulette-wheel" id="roulette-wheel">🎱</div>
                    <div style="margin: 15px 0;">
                        <strong>Last Numbers:</strong> <span id="roulette-history">-</span>
                    </div>
                    <div>
                        <button class="btn danger" onclick="betColor('red')">Red ($25)</button>
                        <button class="btn" onclick="betColor('black')">Black ($25)</button>
                        <button class="btn info" onclick="betNumber()">Lucky Number ($50)</button>
                        <button class="btn warning" onclick="spinRoulette()">SPIN!</button>
                    </div>
                    <div class="game-result" id="roulette-result">🎯 Place your bets on the wheel of fortune!</div>
                </div>
            </div>

            <!-- ENHANCED BACCARAT -->
            <div class="game-card">
                <div class="game-title">🎲 BACCARAT VIP</div>
                <div class="game-content">
                    <div style="margin: 20px 0; font-size: 1.3em;">
                        <div>👤 Player: <span id="baccarat-player">-</span></div>
                        <div>🏦 Banker: <span id="baccarat-banker">-</span></div>
                        <div>📊 Streak: <span id="baccarat-streak">None</span></div>
                    </div>
                    <div>
                        <button class="btn info" onclick="betBaccarat('player')">Bet Player ($30)</button>
                        <button class="btn warning" onclick="betBaccarat('banker')">Bet Banker ($30)</button>
                        <button class="btn" onclick="betBaccarat('tie')">Bet Tie ($100)</button>
                        <button class="btn danger" onclick="dealBaccarat()">Deal Cards</button>
                    </div>
                    <div class="game-result" id="baccarat-result">🎲 High-stakes Baccarat action!</div>
                </div>
            </div>

            <!-- ENHANCED CRAPS -->
            <div class="game-card">
                <div class="game-title">🎲 CRAPS TABLE</div>
                <div class="game-content">
                    <div class="dice-container">
                        <div class="dice" id="die1">🎲</div>
                        <div class="dice" id="die2">🎲</div>
                    </div>
                    <div style="margin: 15px 0;">
                        <strong>Point:</strong> <span id="craps-point">-</span> | 
                        <strong>Round:</strong> <span id="craps-round">Come Out</span>
                    </div>
                    <div>
                        <button class="btn" onclick="betCraps('pass')">Pass Line ($20)</button>
                        <button class="btn danger" onclick="betCraps('dont')">Don't Pass ($20)</button>
                        <button class="btn info" onclick="betCraps('field')">Field Bet ($15)</button>
                        <button class="btn warning" onclick="rollCraps()">Roll Dice</button>
                    </div>
                    <div class="game-result" id="craps-result">🎲 The most exciting dice game!</div>
                </div>
            </div>

            <!-- ENHANCED POKER -->
            <div class="game-card">
                <div class="game-title">🎮 VIDEO POKER</div>
                <div class="game-content">
                    <div id="poker-hand" style="margin: 20px 0; min-height: 60px;"></div>
                    <div style="margin: 15px 0;">
                        <strong>Best Hand:</strong> <span id="poker-best">None</span>
                    </div>
                    <div>
                        <button class="btn" onclick="dealPoker()">Deal Hand ($25)</button>
                        <button class="btn info" onclick="holdCards()">Hold Selected</button>
                        <button class="btn warning" onclick="drawCards()">Draw New</button>
                    </div>
                    <div class="game-result" id="poker-result">🎮 Build the best poker hand!</div>
                </div>
            </div>
        </div>

        <!-- LEADERBOARD -->
        <div class="leaderboard">
            <h3>🏆 Today's Top Winners</h3>
            <div class="leaderboard-item">
                <span>🥇 Player_Alpha</span>
                <span>$2,450</span>
            </div>
            <div class="leaderboard-item">
                <span>🥈 CryptoKing</span>
                <span>$1,890</span>
            </div>
            <div class="leaderboard-item">
                <span>🥉 LuckyGamer</span>
                <span>$1,230</span>
            </div>
            <div class="leaderboard-item">
                <span>🎯 <strong>You</strong></span>
                <span id="your-rank">$<span id="your-winnings">0</span></span>
            </div>
        </div>

        <!-- MINI GAMES -->
        <div class="mini-game">
            <h3>🎪 Bonus Mini-Game: Lucky Wheel</h3>
            <p>Spin every 5 minutes for bonus rewards!</p>
            <button class="btn" onclick="spinBonusWheel()" id="bonus-wheel-btn">Spin Bonus Wheel</button>
            <div id="bonus-result" style="margin-top: 15px;"></div>
        </div>

        <div class="features-showcase">
            <h3>🚀 Your Advanced Casino Features</h3>
            <div class="features-grid">
                <div class="feature-card">
                    <h4>🎰 <strong>10+ Premium Games</strong></h4>
                    <p>Professional casino games with advanced features, animations, and real-time action.</p>
                </div>
                <div class="feature-card">
                    <h4>💰 <strong>Cryptocurrency Support</strong></h4>
                    <p>Bitcoin, Ethereum, USDT, USDC integration with live pricing and secure transactions.</p>
                </div>
                <div class="feature-card">
                    <h4>🤖 <strong>AI Gaming Assistant</strong></h4>
                    <p>Smart recommendations, strategy tips, and personalized gaming experience.</p>
                </div>
                <div class="feature-card">
                    <h4>🏆 <strong>Tournament System</strong></h4>
                    <p>Multi-player competitions, brackets, and championship events with prizes.</p>
                </div>
                <div class="feature-card">
                    <h4>💎 <strong>Progressive Jackpots</strong></h4>
                    <p>Multi-tier jackpot system with community pools and mega prizes.</p>
                </div>
                <div class="feature-card">
                    <h4>📱 <strong>Cross-Platform</strong></h4>
                    <p>Seamless experience across web, mobile, and desktop with React Native.</p>
                </div>
                <div class="feature-card">
                    <h4>🔒 <strong>Enterprise Security</strong></h4>
                    <p>JWT authentication, encryption, rate limiting, and fraud protection.</p>
                </div>
                <div class="feature-card">
                    <h4>⚡ <strong>Real-Time Features</strong></h4>
                    <p>Live chat, multiplayer games, instant notifications, and social features.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification system -->
    <div class="notification" id="notification"></div>

    <script>
        // Enhanced Game State
        let gameState = {
            balance: 1000,
            experience: 0,
            level: 1,
            totalWinnings: 0,
            gamesPlayed: 0,
            currentStreak: 0,
            achievements: [],
            stats: {
                blackjackWins: 0,
                slotStreak: 0,
                rouletteHistory: [],
                baccaratStreak: 'None',
                crapsPoint: null,
                crapsRound: 'Come Out',
                pokerBest: 'None'
            }
        };

        // Game Variables
        let playerCards = [];
        let dealerCards = [];
        let currentBets = {};
        let bonusWheelTimer = 0;

        // Utility Functions
        function updateDisplay() {
            document.getElementById('balance').textContent = `$${gameState.balance.toLocaleString()}`;
            document.getElementById('experience').textContent = `${gameState.experience} XP`;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('your-winnings').textContent = gameState.totalWinnings;
            
            // Update stats
            document.getElementById('blackjack-wins').textContent = gameState.stats.blackjackWins;
            document.getElementById('slot-streak').textContent = gameState.stats.slotStreak;
            document.getElementById('roulette-history').textContent = gameState.stats.rouletteHistory.slice(-5).join(', ') || '-';
            document.getElementById('baccarat-streak').textContent = gameState.stats.baccaratStreak;
            document.getElementById('craps-point').textContent = gameState.stats.crapsPoint || '-';
            document.getElementById('craps-round').textContent = gameState.stats.crapsRound;
            document.getElementById('poker-best').textContent = gameState.stats.pokerBest;
        }

        function addExperience(amount) {
            gameState.experience += amount;
            if (gameState.experience >= gameState.level * 100) {
                gameState.level++;
                showNotification(`🎉 Level Up! You're now level ${gameState.level}!`);
            }
        }

        function updateBalance(amount) {
            gameState.balance += amount;
            if (amount > 0) {
                gameState.totalWinnings += amount;
                addExperience(Math.floor(amount / 10));
            }
            gameState.gamesPlayed++;
            updateDisplay();
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 3000);
        }

        function getRandomCard() {
            const cards = [1,2,3,4,5,6,7,8,9,10,10,10,10];
            return cards[Math.floor(Math.random() * cards.length)];
        }

        function calculateBlackjackScore(cards) {
            let score = cards.reduce((a, b) => a + b, 0);
            let aces = cards.filter(card => card === 1).length;
            while (aces > 0 && score + 10 <= 21) {
                score += 10;
                aces--;
            }
            return score;
        }

        // Enhanced Blackjack
        function startBlackjack() {
            if (gameState.balance < 20) { 
                showNotification('Insufficient balance!'); 
                return; 
            }
            
            updateBalance(-20);
            playerCards = [getRandomCard(), getRandomCard()];
            dealerCards = [getRandomCard()];
            
            const playerScore = calculateBlackjackScore(playerCards);
            document.getElementById('player-cards').textContent = playerCards.join(', ');
            document.getElementById('player-score').textContent = playerScore;
            document.getElementById('dealer-cards').textContent = dealerCards[0] + ', ?';
            document.getElementById('blackjack-result').textContent = 'Your turn! Hit, Stand, or Double Down?';
            
            if (playerScore === 21) {
                setTimeout(() => {
                    document.getElementById('blackjack-result').textContent = '🎉 BLACKJACK! You win $50!';
                    updateBalance(50);
                    gameState.stats.blackjackWins++;
                    updateDisplay();
                }, 1000);
            }
        }

        function hitCard() {
            if (playerCards.length === 0) { 
                showNotification('Start a new game first!'); 
                return; 
            }
            
            playerCards.push(getRandomCard());
            const playerScore = calculateBlackjackScore(playerCards);
            
            document.getElementById('player-cards').textContent = playerCards.join(', ');
            document.getElementById('player-score').textContent = playerScore;
            
            if (playerScore > 21) {
                document.getElementById('blackjack-result').textContent = '💥 BUST! You lose!';
                playerCards = [];
            } else if (playerScore === 21) {
                stand();
            }
        }

        function stand() {
            if (playerCards.length === 0) { 
                showNotification('Start a new game first!'); 
                return; 
            }
            
            while (calculateBlackjackScore(dealerCards) < 17) {
                dealerCards.push(getRandomCard());
            }
            
            const playerScore = calculateBlackjackScore(playerCards);
            const dealerScore = calculateBlackjackScore(dealerCards);
            document.getElementById('dealer-cards').textContent = dealerCards.join(', ');
            
            let result = '';
            if (dealerScore > 21) {
                result = '🎉 Dealer busts! You win $40!';
                updateBalance(40);
                gameState.stats.blackjackWins++;
            } else if (playerScore > dealerScore) {
                result = '🎉 You win $40!';
                updateBalance(40);
                gameState.stats.blackjackWins++;
            } else if (playerScore === dealerScore) {
                result = '🤝 Push! Bet returned.';
                updateBalance(20);
            } else {
                result = '😔 Dealer wins!';
            }
            
            document.getElementById('blackjack-result').textContent = result;
            playerCards = [];
            updateDisplay();
        }

        function doubleDown() {
            if (playerCards.length !== 2) {
                showNotification('Can only double down on first two cards!');
                return;
            }
            if (gameState.balance < 20) {
                showNotification('Insufficient balance for double down!');
                return;
            }
            
            updateBalance(-20);
            hitCard();
            if (calculateBlackjackScore(playerCards) <= 21) {
                setTimeout(stand, 1000);
            }
        }

        // Enhanced Slot Machine
        function spinSlots(bet) {
            if (gameState.balance < bet) { 
                showNotification('Insufficient balance!'); 
                return; 
            }
            
            updateBalance(-bet);
            const symbols = ['🍒', '🍋', '🔔', '⭐', '💎', '7️⃣', '🍀', '👑'];
            const result = [
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)],
                symbols[Math.floor(Math.random() * symbols.length)]
            ];
            
            // Animate slots
            let animationCount = 0;
            const animationInterval = setInterval(() => {
                const tempResult = [
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)],
                    symbols[Math.floor(Math.random() * symbols.length)]
                ];
                document.getElementById('slot-display').textContent = tempResult.join(' ');
                animationCount++;
                
                if (animationCount >= 10) {
                    clearInterval(animationInterval);
                    document.getElementById('slot-display').textContent = result.join(' ');
                    
                    // Check for wins
                    if (result[0] === result[1] && result[1] === result[2]) {
                        let multiplier = 0;
                        switch(result[0]) {
                            case '💎': multiplier = 50; break;
                            case '👑': multiplier = 25; break;
                            case '7️⃣': multiplier = 20; break;
                            case '⭐': multiplier = 15; break;
                            case '🍀': multiplier = 12; break;
                            default: multiplier = 5;
                        }
                        const payout = bet * multiplier;
                        document.getElementById('slot-result').textContent = `🎉 JACKPOT! ${result[0]} ${result[0]} ${result[0]} - You win $${payout}!`;
                        updateBalance(payout);
                        gameState.stats.slotStreak++;
                        showNotification(`💎 Slot jackpot! $${payout}!`);
                    } else if (result[0] === result[1] || result[1] === result[2] || result[0] === result[2]) {
                        const payout = bet * 2;
                        document.getElementById('slot-result').textContent = `🎊 Two matching! You win $${payout}!`;
                        updateBalance(payout);
                        gameState.stats.slotStreak++;
                    } else {
                        document.getElementById('slot-result').textContent = 'No match this time. Try again!';
                        gameState.stats.slotStreak = 0;
                    }
                    updateDisplay();
                }
            }, 100);
        }

        // Enhanced Roulette
        let rouletteBet = null;
        let rouletteBetAmount = 0;

        function betColor(color) {
            if (gameState.balance < 25) { 
                showNotification('Insufficient balance!'); 
                return; 
            }
            rouletteBet = color;
            rouletteBetAmount = 25;
            document.getElementById('roulette-result').textContent = `Bet placed on ${color.toUpperCase()}! Spin the wheel!`;
        }

        function betNumber() {
            if (gameState.balance < 50) { 
                showNotification('Insufficient balance!'); 
                return; 
            }
            const luckyNumber = Math.floor(Math.random() * 37);
            rouletteBet = luckyNumber;
            rouletteBetAmount = 50;
            document.getElementById('roulette-result').textContent = `Lucky number ${luckyNumber} bet placed! Spin the wheel!`;
        }

        function spinRoulette() {
            if (!rouletteBet) { 
                showNotification('Place a bet first!'); 
                return; 
            }
            
            updateBalance(-rouletteBetAmount);
            const number = Math.floor(Math.random() * 37);
            const color = number === 0 ? 'green' : (number % 2 === 0 ? 'black' : 'red');
            
            // Animate wheel
            const wheel = document.getElementById('roulette-wheel');
            wheel.style.animation = 'spin 2s ease-out';
            
            setTimeout(() => {
                wheel.textContent = number;
                wheel.style.background = color === 'red' ? '#ff6b6b' : color === 'black' ? '#2d3436' : '#00b894';
                wheel.style.animation = '';
                
                gameState.stats.rouletteHistory.push(number);
                if (gameState.stats.rouletteHistory.length > 10) {
                    gameState.stats.rouletteHistory.shift();
                }
                
                let result = `🎲 ${number} ${color.toUpperCase()}! `;
                let won = false;
                
                if (typeof rouletteBet === 'string' && color === rouletteBet) {
                    result += `🎉 Color win! You win $${rouletteBetAmount * 2}!`;
                    updateBalance(rouletteBetAmount * 2);
                    won = true;
                } else if (typeof rouletteBet === 'number' && number === rouletteBet) {
                    result += `🎉 NUMBER HIT! You win $${rouletteBetAmount * 35}!`;
                    updateBalance(rouletteBetAmount * 35);
                    won = true;
                    showNotification(`🎯 Lucky number hit! Massive win!`);
                } else {
                    result += '😔 You lose!';
                }
                
                document.getElementById('roulette-result').textContent = result;
                rouletteBet = null;
                rouletteBetAmount = 0;
                updateDisplay();
            }, 2000);
        }

        // Enhanced Baccarat
        let baccaratBet = null;
        let baccaratBetAmount = 0;

        function betBaccarat(type) {
            const amounts = { player: 30, banker: 30, tie: 100 };
            const amount = amounts[type];
            
            if (gameState.balance < amount) { 
                showNotification('Insufficient balance!'); 
                return; 
            }
            
            baccaratBet = type;
            baccaratBetAmount = amount;
            document.getElementById('baccarat-result').textContent = `Bet placed on ${type.toUpperCase()}! Deal the cards!`;
        }

        function dealBaccarat() {
            if (!baccaratBet) { 
                showNotification('Place a bet first!'); 
                return; 
            }
            
            updateBalance(-baccaratBetAmount);
            
            const playerTotal = (getRandomCard() + getRandomCard()) % 10;
            const bankerTotal = (getRandomCard() + getRandomCard()) % 10;
            
            document.getElementById('baccarat-player').textContent = playerTotal;
            document.getElementById('baccarat-banker').textContent = bankerTotal;
            
            let winner = playerTotal > bankerTotal ? 'player' : bankerTotal > playerTotal ? 'banker' : 'tie';
            let result = `👤 Player: ${playerTotal}, 🏦 Banker: ${bankerTotal} - `;
            
            if (winner === 'tie') {
                if (baccaratBet === 'tie') {
                    const payout = baccaratBetAmount * 8;
                    result += `🎉 TIE WINS! You win $${payout}!`;
                    updateBalance(payout);
                    gameState.stats.baccaratStreak = 'Tie Winner';
                } else {
                    result += '🤝 Tie! Bet returned.';
                    updateBalance(baccaratBetAmount);
                    gameState.stats.baccaratStreak = 'Push';
                }
            } else if (winner === baccaratBet) {
                const payout = baccaratBetAmount * 2;
                result += `🎉 ${winner.toUpperCase()} wins! You win $${payout}!`;
                updateBalance(payout);
                gameState.stats.baccaratStreak = `${winner} Winner`;
            } else {
                result += '😔 You lose!';
                gameState.stats.baccaratStreak = 'Loss';
            }
            
            document.getElementById('baccarat-result').textContent = result;
            baccaratBet = null;
            baccaratBetAmount = 0;
            updateDisplay();
        }

        // Enhanced Craps
        let crapsBet = null;
        let crapsBetAmount = 0;

        function betCraps(type) {
            const amounts = { pass: 20, dont: 20, field: 15 };
            const amount = amounts[type];
            
            if (gameState.balance < amount) { 
                showNotification('Insufficient balance!'); 
                return; 
            }
            
            crapsBet = type;
            crapsBetAmount = amount;
            document.getElementById('craps-result').textContent = `${type.toUpperCase()} bet placed! Roll the dice!`;
        }

        function rollCraps() {
            if (!crapsBet) { 
                showNotification('Place a bet first!'); 
                return; 
            }
            
            updateBalance(-crapsBetAmount);
            
            const die1 = Math.floor(Math.random() * 6) + 1;
            const die2 = Math.floor(Math.random() * 6) + 1;
            const total = die1 + die2;
            
            document.getElementById('die1').textContent = die1;
            document.getElementById('die2').textContent = die2;
            
            let result = `🎲 Rolled ${die1} + ${die2} = ${total}! `;
            let won = false;
            
            if (gameState.stats.crapsRound === 'Come Out') {
                if (total === 7 || total === 11) {
                    if (crapsBet === 'pass') {
                        result += `🎉 Natural! Pass line wins $${crapsBetAmount * 2}!`;
                        updateBalance(crapsBetAmount * 2);
                        won = true;
                    } else if (crapsBet === 'dont') {
                        result += '😔 Don\'t pass loses!';
                    }
                } else if (total === 2 || total === 3 || total === 12) {
                    if (crapsBet === 'dont') {
                        result += `🎉 Craps! Don't pass wins $${crapsBetAmount * 2}!`;
                        updateBalance(crapsBetAmount * 2);
                        won = true;
                    } else if (crapsBet === 'pass') {
                        result += '😔 Craps! Pass line loses!';
                    }
                } else {
                    gameState.stats.crapsPoint = total;
                    gameState.stats.crapsRound = 'Point';
                    result += `Point established: ${total}. Roll again!`;
                    updateBalance(crapsBetAmount); // Return bet for point phase
                }
            }
            
            // Field bet logic
            if (crapsBet === 'field') {
                if ([2,3,4,9,10,11,12].includes(total)) {
                    const multiplier = (total === 2 || total === 12) ? 2 : 1;
                    const payout = crapsBetAmount * (1 + multiplier);
                    result += `🎉 Field wins! You win $${payout}!`;
                    updateBalance(payout);
                    won = true;
                } else {
                    result += '😔 Field loses!';
                }
            }
            
            document.getElementById('craps-result').textContent = result;
            
            if (won || gameState.stats.crapsRound === 'Come Out') {
                crapsBet = null;
                crapsBetAmount = 0;
            }
            
            updateDisplay();
        }

        // Enhanced Poker
        let pokerHand = [];
        let heldCards = [];

        function dealPoker() {
            if (gameState.balance < 25) { 
                showNotification('Insufficient balance!'); 
                return; 
            }
            
            updateBalance(-25);
            
            const suits = ['♠', '♥', '♦', '♣'];
            const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            pokerHand = [];
            heldCards = [];
            
            for (let i = 0; i < 5; i++) {
                const suit = suits[Math.floor(Math.random() * suits.length)];
                const rank = ranks[Math.floor(Math.random() * ranks.length)];
                pokerHand.push({ rank, suit, held: false });
            }
            
            displayPokerHand();
            document.getElementById('poker-result').textContent = 'Select cards to hold, then draw new cards!';
        }

        function displayPokerHand() {
            const handElement = document.getElementById('poker-hand');
            handElement.innerHTML = '';
            
            pokerHand.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card-display';
                cardElement.textContent = card.rank + card.suit;
                cardElement.style.cursor = 'pointer';
                cardElement.style.border = card.held ? '3px solid #00d4aa' : '2px solid #ddd';
                cardElement.onclick = () => toggleHold(index);
                handElement.appendChild(cardElement);
            });
        }

        function toggleHold(index) {
            pokerHand[index].held = !pokerHand[index].held;
            displayPokerHand();
        }

        function holdCards() {
            const heldCount = pokerHand.filter(card => card.held).length;
            document.getElementById('poker-result').textContent = `${heldCount} cards held. Click Draw to get new cards!`;
        }

        function drawCards() {
            if (pokerHand.length === 0) { 
                showNotification('Deal a hand first!'); 
                return; 
            }
            
            const suits = ['♠', '♥', '♦', '♣'];
            const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            
            pokerHand.forEach((card, index) => {
                if (!card.held) {
                    const suit = suits[Math.floor(Math.random() * suits.length)];
                    const rank = ranks[Math.floor(Math.random() * ranks.length)];
                    pokerHand[index] = { rank, suit, held: false };
                }
            });
            
            displayPokerHand();
            
            // Evaluate hand
            const handValue = evaluatePokerHand();
            const payouts = {
                'Royal Flush': 800,
                'Straight Flush': 50,
                'Four of a Kind': 25,
                'Full House': 9,
                'Flush': 6,
                'Straight': 4,
                'Three of a Kind': 3,
                'Two Pair': 2,
                'Jacks or Better': 1
            };
            
            if (payouts[handValue]) {
                const payout = 25 * payouts[handValue];
                document.getElementById('poker-result').textContent = `🎉 ${handValue}! You win $${payout}!`;
                updateBalance(payout);
                if (handValue > gameState.stats.pokerBest || gameState.stats.pokerBest === 'None') {
                    gameState.stats.pokerBest = handValue;
                }
            } else {
                document.getElementById('poker-result').textContent = `${handValue || 'High Card'} - No payout.`;
            }
            
            updateDisplay();
        }

        function evaluatePokerHand() {
            // Simplified poker hand evaluation
            const ranks = pokerHand.map(card => card.rank);
            const suits = pokerHand.map(card => card.suit);
            
            const rankCounts = {};
            ranks.forEach(rank => rankCounts[rank] = (rankCounts[rank] || 0) + 1);
            const counts = Object.values(rankCounts).sort((a, b) => b - a);
            
            const isFlush = suits.every(suit => suit === suits[0]);
            const isRoyal = ranks.includes('A') && ranks.includes('K') && ranks.includes('Q') && ranks.includes('J') && ranks.includes('10');
            
            if (isFlush && isRoyal) return 'Royal Flush';
            if (isFlush) return 'Flush';
            if (counts[0] === 4) return 'Four of a Kind';
            if (counts[0] === 3 && counts[1] === 2) return 'Full House';
            if (counts[0] === 3) return 'Three of a Kind';
            if (counts[0] === 2 && counts[1] === 2) return 'Two Pair';
            if (counts[0] === 2 && (ranks.includes('J') || ranks.includes('Q') || ranks.includes('K') || ranks.includes('A'))) return 'Jacks or Better';
            
            return null;
        }

        // Bonus Features
        function spinBonusWheel() {
            const bonusRewards = [
                { type: 'money', amount: 50, text: '$50 Bonus!' },
                { type: 'money', amount: 100, text: '$100 Bonus!' },
                { type: 'money', amount: 25, text: '$25 Bonus!' },
                { type: 'xp', amount: 50, text: '50 XP Bonus!' },
                { type: 'multiplier', amount: 2, text: '2x Multiplier!' }
            ];
            
            const reward = bonusRewards[Math.floor(Math.random() * bonusRewards.length)];
            
            if (reward.type === 'money') {
                updateBalance(reward.amount);
            } else if (reward.type === 'xp') {
                addExperience(reward.amount);
            }
            
            document.getElementById('bonus-result').textContent = `🎊 ${reward.text}`;
            document.getElementById('bonus-wheel-btn').disabled = true;
            document.getElementById('bonus-wheel-btn').textContent = 'Next spin in 5:00';
            
            // 5 minute cooldown
            setTimeout(() => {
                document.getElementById('bonus-wheel-btn').disabled = false;
                document.getElementById('bonus-wheel-btn').textContent = 'Spin Bonus Wheel';
            }, 300000);
        }

        // Server Connection Check
        async function checkConnection() {
            try {
                const response = await fetch('/api/test');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('server-status').innerHTML = '<span style="color: #00d4aa;">✅ Online & Connected</span>';
                    document.getElementById('games-status').textContent = `${data.games?.length || 6} Games Active`;
                } else {
                    throw new Error('Server error');
                }
            } catch (error) {
                document.getElementById('server-status').innerHTML = '<span style="color: #fdcb6e;">⚠️ Demo Mode (Offline)</span>';
                document.getElementById('games-status').textContent = '6 Games (Demo)';
            }
        }

        // Real-time updates
        function updateLiveStats() {
            // Simulate live casino activity
            const players = 200 + Math.floor(Math.random() * 100);
            const winners = 30 + Math.floor(Math.random() * 20);
            const payouts = 100000 + Math.floor(Math.random() * 50000);
            const jackpot = 50000 + Math.floor(Math.random() * 10000);
            
            document.getElementById('players-online').textContent = `${players} Players`;
            document.getElementById('winners-today').textContent = `${winners} Jackpots`;
            document.getElementById('total-payouts').textContent = `$${payouts.toLocaleString()}`;
            document.getElementById('jackpot').textContent = `$${jackpot.toLocaleString()}`;
        }

        // Initialize
        function initialize() {
            updateDisplay();
            checkConnection();
            updateLiveStats();
            
            // Regular updates
            setInterval(checkConnection, 30000);
            setInterval(updateLiveStats, 10000);
            setInterval(() => {
                const ticker = document.getElementById('crypto-ticker');
                ticker.innerHTML = 'BTC: $' + (43000 + Math.floor(Math.random() * 1000)) + ' | ETH: $' + (2800 + Math.floor(Math.random() * 200)) + ' | USDT: $1.00 | USDC: $1.00 | 🎰 Play & Win at Greenwood Games! 🎰';
            }, 15000);
        }

        // Start the casino
        initialize();
    </script>
</body>
</html>
